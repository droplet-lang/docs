"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[429],{8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>i});var o=s(6540);const r={},l=o.createContext(r);function t(e){const n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),o.createElement(l.Provider,{value:n},e.children)}},9753:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tools_and_eco/vm","title":"Droplet VM","description":"The Droplet Virtual Machine (VM) executes bytecode files (.dbc) produced by the Droplet compiler.","source":"@site/docs/tools_and_eco/vm.md","sourceDirName":"tools_and_eco","slug":"/tools_and_eco/vm","permalink":"/docs/docs/tools_and_eco/vm","draft":false,"unlisted":false,"editUrl":"https://github.com/droplet-lang/lang/edit/main/website/docs/tools_and_eco/vm.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Droplet Compiler","permalink":"/docs/docs/tools_and_eco/compiler"},"next":{"title":"Memory Model","permalink":"/docs/docs/tools_and_eco/mem_model"}}');var r=s(4848),l=s(8453);const t={sidebar_position:2},i="Droplet VM",c={},d=[{value:"\ud83d\udd39 Running Bytecode",id:"-running-bytecode",level:2},{value:"\ud83d\udd04 How the VM Works",id:"-how-the-vm-works",level:2},{value:"\u270f\ufe0f Example",id:"\ufe0f-example",level:2},{value:"\ud83e\udde0 Notes",id:"-notes",level:2}];function a(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"droplet-vm",children:"Droplet VM"})}),"\n",(0,r.jsxs)(n.p,{children:["The Droplet Virtual Machine (VM) executes ",(0,r.jsx)(n.strong,{children:"bytecode files"})," (",(0,r.jsx)(n.code,{children:".dbc"}),") produced by the Droplet compiler.",(0,r.jsx)(n.br,{}),"\n","It is a ",(0,r.jsx)(n.strong,{children:"stack-based VM"})," designed for learning purposes."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-running-bytecode",children:"\ud83d\udd39 Running Bytecode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"droplet run hello.dbc\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"hello.dbc"})," \u2192 Compiled Droplet bytecode"]}),"\n",(0,r.jsx)(n.li,{children:"The VM reads the bytecode and executes instructions sequentially."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-how-the-vm-works",children:"\ud83d\udd04 How the VM Works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Load bytecode"})," into memory."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Execute instructions"})," using a stack."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Manage function calls"})," with call frames."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle objects and memory"})," (simple garbage collection is included)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Call native functions"})," registered in the VM (",(0,r.jsx)(n.code,{children:"print"}),", ",(0,r.jsx)(n.code,{children:"println"}),", ",(0,r.jsx)(n.code,{children:"len"}),", ",(0,r.jsx)(n.code,{children:"str"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-example",children:"\u270f\ufe0f Example"}),"\n",(0,r.jsx)(n.p,{children:"Given a bytecode produced from:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'fn main() {\n    println("Hello from the VM!")\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Running it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"droplet run main.dbc\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Hello from the VM!\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-notes",children:"\ud83e\udde0 Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The VM ",(0,r.jsx)(n.strong,{children:"executes only compiled bytecode"}),", not source code."]}),"\n",(0,r.jsxs)(n.li,{children:["Native functions are ",(0,r.jsx)(n.strong,{children:"pre-registered in the VM"})," and available in every program."]}),"\n",(0,r.jsxs)(n.li,{children:["VM design is simple and suitable for ",(0,r.jsx)(n.strong,{children:"educational purposes"})," and understanding how languages execute code."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);